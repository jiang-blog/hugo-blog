---
tags: []
categories: ["work", "openvino_pot"]
description:
summary:
draft: false
isCJKLanguage: true
date: "2022-05-26"
lastmod: "2022-06-10"
title: 1-2-1-精度感知量化算法
---

# 1-2-1-精度感知量化算法

## 简介

精度感知量化算法的目标是精确量化，并允许模型的精度保持在预先定义的范围内。与默认量化算法相比，这可能会导致性能下降，因为有些层可能会恢复到原来的精度。

## 参数

由于[默认量化算法](1-1-1_默认量化算法.md)算法是作为初始化使用的，它的所有参数也同样有效且可以被指定。下面是一个定义`AccuracyAwareQuantization`算法及其参数的例子。

```python
{
    "name": "AccuracyAwareQuantization", // the name of optimization algorithm
    "params": {
        ...
    }
}
```

下面是对精度感知量化特定参数的描述：

- `"ranking_subset_size"` - 子集的大小，用于按其对精度下降的贡献对层进行排序。默认值是300。它的样本越多，你的排名就越好，有可能。

- `"max_iter_num"` - 算法的最大迭代次数，换句话说，就是可能恢复到浮点精度的最大层数。默认情况下，它被量化层的总数量所限制。

- `"maximal_drop"` - 量化后必须达到的最大精度下降。默认值是0.01（1%）。

- `"drop_type"` - 精度指标的下降类型。
	- `"absolute"`（默认）- 相对于全精度模型的结果的绝对下降
	- `"relative"` - 相对于全精度模型的结果而言。

- `"use_prev_if_drop_increase"`- 是否使用前一次迭代的网络快照，以防止下降增加。默认值为True。

- `"base_algorithm"` - 在开始时用于量化模型的算法的名称。默认值是 `"DefaultQuantization"`。

- `"convert_to_mixed_preset"` - 如果用 `"性能 "`预设量化的模型的精度标准不被满足，是否将模型转换为 `"混合 "`模式。这个选项可以帮助减少恢复到浮点精度的层数。注意：这是一个实验性的功能。

- `"metrics"` - 在优化过程中考虑的指标的可选列表。它由具有以下参数的图元组成。

- `"name"` - 要优化的指标的名称

- `"baseline_value"` - 原始模型的基线度量值。这是一个可选参数。如果没有指定，对整个验证的验证将在开始时启动。

- `"metric_subset_ratio"` - 在原始模型的预定义度量值的情况下，创建排名子集时用于比较原始全精度和完全量化模型的验证集的一部分。默认值为0.5。

- `"tune_hyperparams"` - 启用量化参数调整，作为将图层恢复到浮点精度之前的一个初步步骤。它可以带来额外的性能和精度提升，但会增加整体量化时间。默认值是False。

## 示例

示例：

- 控制精度的物体检测模型的量化

POT命令行界面的精度感知算法的模板和完整规范：

- 模板

- 完整的规范
