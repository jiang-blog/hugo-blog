---
tags: []
categories: ["work"]
description:
summary:
draft: false
isCJKLanguage: true
date: "2022-06-02"
lastmod: "2022-06-06"
title: IEEE754浮点数
---

# IEEE754浮点数

> [!cite] 参考
> [IEEE754标准](https://www.jianshu.com/p/8ee02e9bb57d)

## 浮点数存储方式

float：32位单精度浮点数
double：64位双精度浮点数

![单双精度浮点数对比](https://s2.loli.net/2022/06/02/owKLCH4OEtVvbaR.png)

### 32位单精度浮点数存储方式

![](https://s2.loli.net/2022/06/02/9WrybehRlMsDj8N.png)

#### 符号位 (sign)

1/31
0表示正数，1表示负数

#### 偏移后的指数位 (biased exponent)

8/30-23
用于表示[-127, 128]范围内的指数
偏移量：127
指数位表示 = 实际指数 + 偏移量 **（始终为正）**

64位偏移量：1023

#### 尾数位 (fraction)

23/22-0
将十进制浮点数表示为二进制格式
十进制浮点数  -> 二进制浮点数 = 尾数 * 2 ^ 实际指数
尾数第一位非零（恒为一），小数点位于第一位后，格式为 **1.xxxxx**

尾数特殊处理：

- 隐藏高位：最高位始终为1，隐藏
- 低位补0：保证填满23位

#### 实例

十进制浮点数：20.5
二进制浮点数：10100.1 = 1.01001 * 2 ^ 4

符号位：0
偏移后指数位：1000 0011 = 132 = 4+127
尾数位：0100 1000 0000 0000 000

![](https://s2.loli.net/2022/06/02/SAC8aG3hspULf9E.png)

## 浮点数分类

### 规格数  (normal number)

[[IEEE754浮点数#尾数位 fraction|尾数位]]隐藏最高位为1的常规浮点数
**无法表示0**

### 非规格数 (subnormal number)

[[IEEE754浮点数#尾数位 fraction|尾数位]]隐藏最高位为0的非常规数
[[IEEE754浮点数#偏移后的指数位 biased exponent|指数位]]全部填充为0 ：0000 0000，对应实际指数固定为-126

### 特殊数 (non-number)

非正常数：$\pm\infty$ 或 NaN
[[IEEE754浮点数#偏移后的指数位 biased exponent|指数位]]全部填充为1：1111 1111

#### $\infty$

[[IEEE754浮点数#尾数位 fraction|尾数位]]全部为0，其对应状态为$2^{128}$
根据符号位不同分为$+\infty$和$-\infty$

#### NaN

[[IEEE754浮点数#符号位 sign|符号位]]可正可负
[[IEEE754浮点数#尾数位 fraction|尾数位]]不全为0

## 浮点数取值范围

### 规格数

![](https://s2.loli.net/2022/06/02/T9WeOIUwXV8Q45t.png)

指数部分：[-126, 127] （不含全0 和全1）
尾数部分：[1.00…00, 1.11…11]（二进制），约为[1, 2)（十进制）

取值范围 = $\pm{尾数} * 2^{指数}$ = $\pm[1, 2) * 2^{[-126,127]}$

### 非规格数

取值范围 = $\pm{尾数} * 2^{指数}$ = $\pm[0, 1) * 2 ^ {-126}$
当尾数取0时，可通过变换符号位表示+0和-0

#### 逐渐溢出

非规格数尾数从0增加至$(1-2^{-23})$然后衔接至规格数最小值1
这种特性在IEEE754中称为**逐渐溢出**

### 综合

浮点数值域为$(-2 * 2^{127}, 2 * 2^{127})$

### 特殊数

超过取值范围：$\infty$
无法表达（例如虚数）：NaN

## 浮点数精度

数学中的小数是连续的，而计算机中所表达的小数是离散的
随着浮点数数值的增加，IEEE754所能表达的浮点数之间的间隔越来越大，通常来说，32位浮点数能够保持约7位数的有效精度，64位浮点数则为约16位

尽管浮点数最大能表示至约2的128次方，实际在 **16777216** 之后的整数便由于间隔太大而无法精确存储。
